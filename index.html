<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VR Education Platform - DREAMTEAM</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }

        .header h1 {
            color: white;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.2em;
        }

        .user-info {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
        }

        .user-details h3 {
            color: #333;
            margin-bottom: 5px;
        }

        .user-details p {
            color: #666;
            font-size: 0.9em;
        }

        .status {
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .status.online {
            background: #4CAF50;
            color: white;
        }

        .status.in-session {
            background: #FF9800;
            color: white;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 20px;
        }

        .lectures .card-icon {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .labs .card-icon {
            background: linear-gradient(45deg, #f093fb, #f5576c);
            color: white;
        }

        .campus .card-icon {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            color: white;
        }

        .social .card-icon {
            background: linear-gradient(45deg, #43e97b, #38f9d7);
            color: white;
        }

        .mentoring .card-icon {
            background: linear-gradient(45deg, #fa709a, #fee140);
            color: white;
        }

        .progress .card-icon {
            background: linear-gradient(45deg, #a8edea, #fed6e3);
            color: #666;
        }

        .card h3 {
            margin: 0;
            color: #333;
            font-size: 1.3em;
        }

        .card-content {
            margin-top: 15px;
        }

        .session-list {
            list-style: none;
        }

        .session-item {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .session-item:last-child {
            border-bottom: none;
        }

        .session-time {
            font-size: 0.9em;
            color: #666;
        }

        .session-status {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .live {
            background: #4CAF50;
            color: white;
        }

        .upcoming {
            background: #2196F3;
            color: white;
        }

        .completed {
            background: #9E9E9E;
            color: white;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f8f9fa;
            color: #333;
            border: 2px solid #dee2e6;
        }

        .btn-secondary:hover {
            background: #e9ecef;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .close {
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #999;
        }

        .close:hover {
            color: #333;
        }

        .vr-view {
            background: linear-gradient(45deg, #1a1a2e, #16213e);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            color: white;
            text-align: center;
        }

        .vr-environment {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            border: 2px dashed rgba(255, 255, 255, 0.3);
        }

        .participants {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .participant {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.9em;
        }

        .participant-avatar {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            margin-right: 8px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4CAF50;
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            display: none;
        }

        .login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .login-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
            max-width: 400px;
            width: 90%;
        }

        .login-container h1 {
            color: white;
            font-size: 2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .login-container p {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 30px;
        }

        .login-form input {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            box-sizing: border-box;
        }

        .login-form input:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }

        .attendance-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 1002;
            text-align: center;
            min-width: 300px;
        }

        .feedback-form {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .feedback-form h3 {
            margin-bottom: 15px;
            color: #333;
        }

        .rating-stars {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 15px 0;
        }

        .star {
            font-size: 24px;
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .star:hover,
        .star.active {
            color: #ffa500;
        }

        .voice-interaction {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            color: white;
            text-align: center;
        }

        .whiteboard-demo {
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            text-align: center;
            min-height: 150px;
            position: relative;
        }

        .whiteboard-tools {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 15px;
        }

        .tool-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            background: #667eea;
            color: white;
            cursor: pointer;
            font-size: 12px;
        }

        .tool-btn:hover {
            background: #5a67d8;
        }

        .tool-btn.active {
            background: #4c51bf;
        }

        .lab-step {
            display: flex;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #dee2e6;
            color: #333;
        }

        .lab-step.completed {
            background: #d4edda;
            border-left-color: #28a745;
        }

        .lab-step.current {
            background: #fff3cd;
            border-left-color: #ffc107;
        }

        .step-status {
            margin-right: 10px;
            font-size: 16px;
        }

        .campus-map {
            position: relative;
            background: linear-gradient(135deg, #e8f5e8 0%, #d4f1d4 100%);
            border: 2px solid #4CAF50;
        }

        .map-location {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .map-location:hover {
            transform: scale(1.1);
            border-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .map-location.visited {
            opacity: 0.7;
            border-color: #4CAF50;
        }

        .map-location.current {
            animation: pulse 2s infinite;
            border-color: #fff;
        }

        .social-space-card:hover {
            transform: scale(1.05);
            transition: transform 0.3s ease;
        }

        .social-space-card.selected {
            border: 3px solid #43e97b;
            animation: glow 2s infinite;
        }

        @keyframes glow {
            0% {
                box-shadow: 0 0 5px #43e97b;
            }

            50% {
                box-shadow: 0 0 20px #43e97b;
            }

            100% {
                box-shadow: 0 0 5px #43e97b;
            }
        }

        .emoji-btn:hover {
            transform: scale(1.2);
            transition: transform 0.2s ease;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(102, 126, 234, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(102, 126, 234, 0);
            }
        }

        .equipment-item:hover {
            transform: scale(1.05);
            transition: transform 0.2s ease;
        }

        .modal-content {
            overflow-y: auto;
            max-height: 1000px;
        }

        #locationHotspots li {
            color: #fff
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }

            .user-info {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
        }
    </style>
</head>

<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <h1>üåê VR Education Platform</h1>
            <p>Welcome to the Metaverse Learning Experience</p>
            <div class="login-form">
                <input type="text" id="loginUsername" placeholder="Student ID or Email"
                    value="jan.kowalski@student.put.poznan.pl">
                <input type="password" id="loginPassword" placeholder="Password" value="password123">
                <button class="btn btn-primary" onclick="performLogin()" style="width: 100%; margin-top: 15px;">
                    üöÄ Enter Metaverse Platform
                </button>
            </div>
        </div>
    </div>

    <div class="container" id="mainApp" style="display: none;">
        <!-- Header -->
        <div class="header">
            <h1>üåê VR Education Platform</h1>
            <p>Immersive Learning Experience - DREAMTEAM Project</p>
        </div>

        <!-- User Info -->
        <div class="user-info">
            <div style="display: flex; align-items: center; gap: 15px;">
                <div class="avatar" id="userAvatar">JK</div>
                <div class="user-details">
                    <h3 id="userName">Jan Kowalski</h3>
                    <p id="userRole">Computer Science Student ‚Ä¢ Year 2</p>
                </div>
            </div>
            <div class="status online" id="userStatus">üü¢ Online</div>
        </div>

        <!-- Main Dashboard -->
        <div class="dashboard">
            <!-- Virtual Lectures Card -->
            <div class="card lectures" onclick="openModal('lecturesModal')">
                <div class="card-header">
                    <div class="card-icon">üéì</div>
                    <h3>Virtual Lectures</h3>
                </div>
                <div class="card-content">
                    <ul class="session-list">
                        <li class="session-item">
                            <div>
                                <strong>Advanced Algorithms</strong><br>
                                <span class="session-time">Today 14:00-15:30</span>
                            </div>
                            <span class="session-status live">LIVE</span>
                        </li>
                        <li class="session-item">
                            <div>
                                <strong>Database Systems</strong><br>
                                <span class="session-time">Tomorrow 10:00-11:30</span>
                            </div>
                            <span class="session-status upcoming">Upcoming</span>
                        </li>
                        <li class="session-item">
                            <div>
                                <strong>Software Engineering</strong><br>
                                <span class="session-time">Yesterday 16:00-17:30</span>
                            </div>
                            <span class="session-status completed">Completed</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Virtual Labs Card -->
            <div class="card labs" onclick="openModal('labsModal')">
                <div class="card-header">
                    <div class="card-icon">üî¨</div>
                    <h3>Virtual Labs</h3>
                </div>
                <div class="card-content">
                    <ul class="session-list">
                        <li class="session-item">
                            <div>
                                <strong>Chemistry Lab - Titration</strong><br>
                                <span class="session-time">Available 24/7</span>
                            </div>
                            <span class="session-status upcoming">Start</span>
                        </li>
                        <li class="session-item">
                            <div>
                                <strong>Physics - Wave Properties</strong><br>
                                <span class="session-time">Progress: 75%</span>
                            </div>
                            <span class="session-status live">Continue</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Campus Exploration Card -->
            <div class="card campus" onclick="openModal('campusModal')">
                <div class="card-header">
                    <div class="card-icon">üèõÔ∏è</div>
                    <h3>Explore Campus</h3>
                </div>
                <div class="card-content">
                    <p>Discover university buildings and facilities in VR</p>
                    <div class="progress-bar">
                        <div id="exploreCampusBar" class="progress-fill" style="width: 60%"></div>
                    </div>
                    <p id="exploreCampusProgress" style="font-size: 0.9em; color: #666; margin-top: 10px;">
                        6/10 locations visited
                    </p>
                </div>
            </div>

            <!-- Social VR Spaces Card -->
            <div class="card social" onclick="openModal('socialModal')">
                <div class="card-header">
                    <div class="card-icon">üë•</div>
                    <h3>Social Spaces</h3>
                </div>
                <div class="card-content">
                    <ul class="session-list">
                        <li class="session-item">
                            <div>
                                <strong>Study Caf√©</strong><br>
                                <span class="session-time">12 students online</span>
                            </div>
                            <span class="session-status live">Join</span>
                        </li>
                        <li class="session-item">
                            <div>
                                <strong>Gaming Lounge</strong><br>
                                <span class="session-time">5 students online</span>
                            </div>
                            <span class="session-status upcoming">Join</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Mentoring Sessions Card -->
            <div class="card mentoring" onclick="openModal('mentoringModal')">
                <div class="card-header">
                    <div class="card-icon">üéØ</div>
                    <h3>Mentoring</h3>
                </div>
                <div class="card-content">
                    <ul class="session-list">
                        <li class="session-item">
                            <div>
                                <strong>Career Guidance</strong><br>
                                <span class="session-time">Dr. Smith - Today 16:00</span>
                            </div>
                            <span id="mentoringSessionLi" class="session-status upcoming">Scheduled</span>
                        </li>
                    </ul>
                    <button class="btn btn-secondary" style="width: 100%; margin-top: 10px;">
                        Schedule New Session
                    </button>
                </div>
            </div>

            <!-- Orientation Progress Card -->
            <div class="card progress" onclick="openModal('progressModal')">
                <div class="card-header">
                    <div class="card-icon">üìà</div>
                    <h3>Orientation Progress</h3>
                </div>
                <div class="card-content">
                    <div class="progress-bar">
                        <div id="progress4" class="progress-fill" style="width: 80%"></div>
                    </div>
                    <p id="progress3" style="font-size: 0.9em; color: #666; margin-top: 10px;">
                        8/10 tasks completed
                    </p>
                    <p style="font-size: 0.9em; margin-top: 10px;">
                        üèÜ Almost there! Complete campus tour to unlock your digital badge.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Lectures Modal -->
    <div id="lecturesModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('lecturesModal')">&times;</span>
            <h2>üéì Virtual Lectures</h2>
            <div class="vr-view">
                <h3>Join Advanced Algorithms Lecture</h3>
                <div class="vr-environment">
                    <p>üèõÔ∏è Virtual Lecture Hall - Room 101</p>
                    <p id="environmentStatus">Loading immersive environment...</p>
                </div>

                <!-- Attendance Recording -->
                <div id="attendanceSection" style="display: none;">
                    <div
                        style="background: rgba(76, 175, 80, 0.1); padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <h4>‚úÖ Attendance Recorded</h4>
                        <p>Student: Jan Kowalski | Time: 14:02 | Status: Present</p>
                    </div>
                </div>

                <!-- Interactive Whiteboard Demo -->
                <div id="whiteboardSection" style="display: none;">
                    <div class="whiteboard-demo">
                        <div class="whiteboard-tools">
                            <button class="tool-btn active" onclick="selectTool('pen')">‚úèÔ∏è Pen</button>
                            <button class="tool-btn" onclick="selectTool('eraser')">üßΩ Eraser</button>
                            <button class="tool-btn" onclick="selectTool('text')">üìù Text</button>
                            <button class="tool-btn" onclick="selectTool('shape')">üî∑ Shapes</button>
                        </div>
                        <div id="whiteboardContent"
                            style="min-height: 100px; background: white; border-radius: 5px; padding: 10px;">
                            <p style="color: #667eea; text-align: center; margin-top: 30px;">
                                üìä Algorithm Complexity Chart<br>
                                <small>Prof. Johnson is drawing live...</small>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Voice Interaction -->
                <div id="voiceSection" style="display: none;">
                    <div class="voice-interaction">
                        <h4>üé§ Voice Interaction Active</h4>
                        <p>You can now ask questions or participate in discussion</p>
                        <button class="btn btn-secondary" onclick="toggleMicrophone()" id="micBtn">
                            üé§ Unmute Microphone
                        </button>
                    </div>
                </div>

                <div class="participants">
                    <div class="participant">
                        <div class="participant-avatar"></div>
                        Prof. Johnson (Lecturer)
                    </div>
                    <div class="participant">
                        <div class="participant-avatar"></div>
                        Anna K.
                    </div>
                    <div class="participant">
                        <div class="participant-avatar"></div>
                        Tomasz P.
                    </div>
                    <div class="participant">
                        <div class="participant-avatar"></div>
                        +23 others
                    </div>
                </div>
                <button class="btn btn-primary" onclick="joinVRLecture()" id="joinLectureBtn">
                    ü•Ω Enter VR Lecture Hall
                </button>
            </div>

            <!-- Feedback Form -->
            <div id="feedbackSection" style="display: none;">
                <div class="feedback-form">
                    <h3>üìù Lecture Feedback</h3>
                    <p>How would you rate this lecture?</p>
                    <div class="rating-stars">
                        <span class="star" onclick="setRating(1)">‚≠ê</span>
                        <span class="star" onclick="setRating(2)">‚≠ê</span>
                        <span class="star" onclick="setRating(3)">‚≠ê</span>
                        <span class="star" onclick="setRating(4)">‚≠ê</span>
                        <span class="star" onclick="setRating(5)">‚≠ê</span>
                    </div>
                    <textarea placeholder="Additional comments..."
                        style="width: 100%; height: 80px; padding: 10px; border-radius: 5px; border: 1px solid #ddd; margin: 10px 0; resize: vertical;"></textarea>
                    <button class="btn btn-primary" onclick="submitFeedback()">Submit Feedback</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Labs Modal -->
    <div id="labsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('labsModal')">&times;</span>
            <h2>üî¨ Virtual Laboratory</h2>
            <div class="vr-view">
                <h3>Chemistry Lab - Acid-Base Titration</h3>
                <div class="vr-environment">
                    <p>üß™ Virtual Chemistry Laboratory</p>
                    <p id="labEnvironmentStatus">Loading lab simulation...</p>
                </div>

                <!-- Lab Equipment Section -->
                <div id="labEquipmentSection" style="display: none;">
                    <h4>üõ†Ô∏è Available Equipment:</h4>
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin: 15px 0;">
                        <div class="equipment-item" onclick="selectEquipment('burette')">
                            <div
                                style="background: #e3f2fd; padding: 10px; border-radius: 8px; text-align: center; cursor: pointer; color: #1976d2; font-weight: bold;">
                                üß™ Burette
                            </div>
                        </div>
                        <div class="equipment-item" onclick="selectEquipment('pipette')">
                            <div
                                style="background: #e8f5e8; padding: 10px; border-radius: 8px; text-align: center; cursor: pointer; color: #388e3c; font-weight: bold;">
                                üî¨ Pipette
                            </div>
                        </div>
                        <div class="equipment-item" onclick="selectEquipment('flask')">
                            <div
                                style="background: #fff3e0; padding: 10px; border-radius: 8px; text-align: center; cursor: pointer; color: #f57c00; font-weight: bold;">
                                ü•É Conical Flask
                            </div>
                        </div>
                        <div class="equipment-item" onclick="selectEquipment('phmeter')">
                            <div
                                style="background: #fce4ec; padding: 10px; border-radius: 8px; text-align: center; cursor: pointer; color: #c2185b; font-weight: bold;">
                                üìä pH Meter
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step-by-step Instructions -->
                <div id="labInstructionsSection" style="display: none;">
                    <h4>üìã Experiment Steps:</h4>
                    <div id="labStepsList">
                        <div class="lab-step" data-step="1">
                            <span class="step-status">‚èπÔ∏è</span> Set up titration apparatus
                        </div>
                        <div class="lab-step" data-step="2">
                            <span class="step-status">‚èπÔ∏è</span> Prepare standard solution
                        </div>
                        <div class="lab-step" data-step="3">
                            <span class="step-status">‚èπÔ∏è</span> Add indicator to sample
                        </div>
                        <div class="lab-step" data-step="4">
                            <span class="step-status">‚èπÔ∏è</span> Perform titration
                        </div>
                        <div class="lab-step" data-step="5">
                            <span class="step-status">‚èπÔ∏è</span> Record results and calculate
                        </div>
                    </div>
                </div>

                <!-- Action Validation -->
                <div id="labActionSection" style="display: none;">
                    <div style="padding: 15px; border-radius: 10px; margin: 15px 0; border: 4px solid #2196F3;">
                        <h4>üéØ Current Action:</h4>
                        <p id="currentAction">Setting up burette...</p>
                        <div class="progress-bar">
                            <div class="progress-fill" id="labProgress" style="width: 0%"></div>
                        </div>
                        <button class="btn btn-primary" onclick="performLabAction()" id="labActionBtn">
                            ‚úÖ Validate Action
                        </button>
                    </div>
                </div>

                <!-- Results Storage -->
                <div id="labResultsSection" style="display: none;border: 4px solid blue;">
                    <h4>üìä Experiment Results:</h4>
                    <p><strong>Initial Volume:</strong> <span id="initialVolume">25.0 mL</span></p>
                    <p><strong>Final Volume:</strong> <span id="finalVolume">--</span></p>
                    <p><strong>Titrant Used:</strong> <span id="titrantUsed">--</span></p>
                    <p><strong>Calculated Concentration:</strong> <span id="concentration">--</span></p>
                    <div id="labFeedback" style="margin-top: 10px; font-weight: bold;"></div>
                </div>
            </div>

            <button class="btn btn-primary" onclick="startLabExperiment()" id="startLabBtn">
                ü•Ω Enter Virtual Lab
            </button>
        </div>
    </div>
    </div>

    <!-- Campus Modal -->
    <div id="campusModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('campusModal')">&times;</span>
            <h2>üèõÔ∏è Campus Exploration</h2>
            <div class="vr-view">
                <h3>Virtual Campus Tour</h3>
                <div class="vr-environment">
                    <p>üó∫Ô∏è Interactive Campus Map</p>
                    <p id="campusEnvironmentStatus">Loading campus environment...</p>
                </div>

                <!-- Campus Navigation Controls -->
                <div id="campusNavigationSection" style="display: none;">
                    <div style="background: #f0f8ff; padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <h4>üéÆ VR Navigation Controls:</h4>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 10px 0;">
                            <button class="btn btn-secondary" onclick="moveDirection('forward')">‚¨ÜÔ∏è Move
                                Forward</button>
                            <button class="btn btn-secondary" onclick="moveDirection('backward')">‚¨áÔ∏è Move
                                Backward</button>
                            <button class="btn btn-secondary" onclick="moveDirection('left')">‚¨ÖÔ∏è Turn Left</button>
                            <button class="btn btn-secondary" onclick="moveDirection('right')">‚û°Ô∏è Turn Right</button>
                        </div>
                        <p style="font-size: 0.9em; color: #666; margin-top: 10px;">
                            Use VR controllers or gestures to navigate freely
                        </p>
                    </div>
                </div>

                <!-- Interactive Campus Map -->
                <div id="campusMapSection" style="display: none;">
                    <h4>üó∫Ô∏è Campus Map - Click locations to visit:</h4>
                    <div class="campus-map"
                        style="background: #e8f5e8; border-radius: 10px; padding: 20px; margin: 15px 0; position: relative; min-height: 300px;">
                        <div class="map-location" data-location="library" onclick="visitLocation('library')"
                            style="position: absolute; top: 20%; left: 20%; background: #4CAF50; color: white; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 12px;">
                            üìö Main Library
                        </div>
                        <div class="map-location" data-location="cs-building" onclick="visitLocation('cs-building')"
                            style="position: absolute; top: 30%; left: 60%; background: #2196F3; color: white; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 12px;">
                            üíª CS Building
                        </div>
                        <div class="map-location" data-location="cafeteria" onclick="visitLocation('cafeteria')"
                            style="position: absolute; top: 60%; left: 40%; background: #FF9800; color: white; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 12px;">
                            üçΩÔ∏è Cafeteria
                        </div>
                        <div class="map-location" data-location="sports" onclick="visitLocation('sports')"
                            style="position: absolute; top: 70%; left: 70%; background: #9C27B0; color: white; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 12px;">
                            üèÉ Sports Complex
                        </div>
                        <div class="map-location" data-location="admin" onclick="visitLocation('admin')"
                            style="position: absolute; top: 40%; left: 30%; background: #607D8B; color: white; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 12px;">
                            üè¢ Administration
                        </div>
                        <div class="map-location" data-location="dormitory" onclick="visitLocation('dormitory')"
                            style="position: absolute; top: 80%; left: 20%; background: #795548; color: white; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 12px;">
                            üè† Dormitory
                        </div>
                        <div class="map-location" data-location="engineering" onclick="visitLocation('engineering')"
                            style="position: absolute; top: 50%; left: 80%; background: #FF5722; color: white; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 12px;">
                            ‚öôÔ∏è Engineering Labs
                        </div>
                        <div class="map-location" data-location="art" onclick="visitLocation('art')"
                            style="position: absolute; top: 20%; left: 70%; background: #E91E63; color: white; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 12px;">
                            üé® Art Gallery
                        </div>
                        <div class="map-location" data-location="medical" onclick="visitLocation('medical')"
                            style="position: absolute; top: 10%; left: 50%; background: #009688; color: white; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 12px;">
                            üè• Medical Center
                        </div>
                        <div class="map-location" data-location="union" onclick="visitLocation('union')"
                            style="position: absolute; top: 60%; left: 15%; background: #FFC107; color: black; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 12px;">
                            üë• Student Union
                        </div>

                        <!-- Avatar position indicator -->
                        <div id="avatarPosition"
                            style="position: absolute; top: 50%; left: 50%; background: #667eea; color: white; padding: 6px; border-radius: 50%; font-size: 16px; z-index: 10;">
                            üßë‚Äçüéì
                        </div>
                    </div>
                </div>

                <!-- Location Information -->
                <div id="locationInfoSection" style="display: none;">
                    <div id="locationDetails"
                        style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <h4 id="locationName">üìç Current Location</h4>
                        <p id="locationDescription">Select a location to explore</p>
                        <div id="locationHotspots" style="margin: 10px 0;"></div>
                        <button class="btn btn-primary" onclick="exploreLocation()" id="exploreBtn"
                            style="display: none;">
                            üîç Explore This Area
                        </button>
                    </div>
                </div>

                <!-- Progress Tracking -->
                <div id="campusProgressSection" style="display: none;">
                    <div style="background: #fff3e0; padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <h4>üìä Exploration Progress:</h4>
                        <div class="progress-bar">
                            <div class="progress-fill" id="campusProgressBar" style="width: 60%"></div>
                        </div>
                        <p id="progressText" style="margin: 10px 0; color: #333;">6/10 locations visited</p>
                        <div id="visitedLocationsList" style="margin-top: 10px;">
                            <h5>‚úÖ Visited Locations:</h5>
                            <ul id="visitedList" style="margin-left: 20px; color: #333;">
                                <li>üìö Main Library</li>
                                <li>üíª Computer Science Building</li>
                                <li>üçΩÔ∏è Student Cafeteria</li>
                                <li>üèÉ Sports Complex</li>
                                <li>üè¢ Administration Office</li>
                                <li>üè† Dormitory</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="startCampusExploration()" id="startCampusBtn">
                    ü•Ω Start Campus Tour
                </button>
            </div>
        </div>
    </div>

    <!-- Social Modal -->
    <div id="socialModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('socialModal')">&times;</span>
            <h2>üë• Social VR Spaces</h2>
            <div class="vr-view">
                <h3>Join Social VR Space</h3>
                <div class="vr-environment">
                    <p>üåê Virtual Social Environment</p>
                    <p id="socialEnvironmentStatus">Loading social space...</p>
                </div>

                <!-- Social Space Selection -->
                <div id="socialSpaceSelection" style="display: none;">
                    <h4>üè† Available Social Spaces:</h4>
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 15px 0;">
                        <div class="social-space-card" onclick="selectSocialSpace('study-cafe')"
                            data-space="study-cafe">
                            <div
                                style="background: linear-gradient(45deg, #8B4513, #D2691E); color: white; padding: 15px; border-radius: 10px; text-align: center; cursor: pointer;">
                                <h5>‚òï Study Caf√©</h5>
                                <p style="font-size: 0.9em; margin: 5px 0;">Quiet study environment</p>
                                <p style="font-size: 0.8em;"><span id="cafe-users">12</span> students online</p>
                            </div>
                        </div>
                        <div class="social-space-card" onclick="selectSocialSpace('gaming-lounge')"
                            data-space="gaming-lounge">
                            <div
                                style="background: linear-gradient(45deg, #FF6B6B, #4ECDC4); color: white; padding: 15px; border-radius: 10px; text-align: center; cursor: pointer;">
                                <h5>üéÆ Gaming Lounge</h5>
                                <p style="font-size: 0.9em; margin: 5px 0;">Casual games & entertainment</p>
                                <p style="font-size: 0.8em;"><span id="gaming-users">5</span> students online</p>
                            </div>
                        </div>
                        <div class="social-space-card" onclick="selectSocialSpace('discussion-forum')"
                            data-space="discussion-forum">
                            <div
                                style="background: linear-gradient(45deg, #667eea, #764ba2); color: white; padding: 15px; border-radius: 10px; text-align: center; cursor: pointer;">
                                <h5>üí¨ Discussion Forum</h5>
                                <p style="font-size: 0.9em; margin: 5px 0;">Academic discussions</p>
                                <p style="font-size: 0.8em;"><span id="forum-users">8</span> students online</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Real-time Participants -->
                <div id="socialParticipantsSection" style="display: none;">
                    <h4>üë• Current Participants:</h4>
                    <div class="participants" id="socialParticipantsList">
                        <div class="participant">
                            <div class="participant-avatar"></div>
                            Maria S.
                        </div>
                        <div class="participant">
                            <div class="participant-avatar"></div>
                            Piotr K.
                        </div>
                        <div class="participant">
                            <div class="participant-avatar"></div>
                            Elena M.
                        </div>
                        <div class="participant">
                            <div class="participant-avatar"></div>
                            +9 others
                        </div>
                    </div>
                </div>

                <!-- Audio Chat Controls -->
                <div id="socialAudioSection" style="display: none;">
                    <div
                        style="background: linear-gradient(45deg, #43e97b, #38f9d7); border-radius: 10px; padding: 15px; margin: 15px 0; color: white; text-align: center;">
                        <h4>üé§ Proximity Voice Chat Active</h4>
                        <p>Audio automatically activates when near other avatars</p>
                        <div style="display: flex; gap: 10px; justify-content: center; margin: 10px 0;">
                            <button class="btn btn-secondary" onclick="toggleSocialMicrophone()" id="socialMicBtn">
                                üé§ Mute Microphone
                            </button>
                            <button class="btn btn-secondary" onclick="toggleSocialSpeaker()" id="socialSpeakerBtn">
                                üîä Mute Speaker
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Interactive Activities -->
                <div id="socialActivitiesSection" style="display: none;">
                    <h4>üéØ Available Activities:</h4>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 15px 0;">
                        <button class="btn btn-secondary" onclick="startSocialActivity('quiz')">
                            üß† Quick Quiz
                        </button>
                        <button class="btn btn-secondary" onclick="startSocialActivity('game')">
                            üé≤ Mini Games
                        </button>
                        <button class="btn btn-secondary" onclick="startSocialActivity('study-group')">
                            üìö Study Group
                        </button>
                        <button class="btn btn-secondary" onclick="startSocialActivity('chat')">
                            üí¨ Group Chat
                        </button>
                    </div>
                </div>

                <!-- Emoji Reactions -->
                <div id="socialReactionsSection" style="display: none;">
                    <div
                        style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <h4>üòä Emoji Reactions:</h4>
                        <div style="display: flex; gap: 10px; justify-content: center; margin: 10px 0;">
                            <button class="emoji-btn" onclick="sendReaction('üëã')"
                                style="background: none; border: none; font-size: 24px; cursor: pointer;">üëã</button>
                            <button class="emoji-btn" onclick="sendReaction('üëç')"
                                style="background: none; border: none; font-size: 24px; cursor: pointer;">üëç</button>
                            <button class="emoji-btn" onclick="sendReaction('üëè')"
                                style="background: none; border: none; font-size: 24px; cursor: pointer;">üëè</button>
                            <button class="emoji-btn" onclick="sendReaction('üòä')"
                                style="background: none; border: none; font-size: 24px; cursor: pointer;">üòä</button>
                            <button class="emoji-btn" onclick="sendReaction('ü§î')"
                                style="background: none; border: none; font-size: 24px; cursor: pointer;">ü§î</button>
                            <button class="emoji-btn" onclick="sendReaction('‚ù§Ô∏è')"
                                style="background: none; border: none; font-size: 24px; cursor: pointer;">‚ù§Ô∏è</button>
                        </div>
                        <div id="reactionFeed"
                            style="margin-top: 10px; max-height: 100px; overflow-y: auto; font-size: 0.9em;">
                            <!-- Reaction feed will appear here -->
                        </div>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="startSocialVRSession()" id="joinSocialBtn">
                    ü•Ω Join Social VR Space
                </button>
            </div>
        </div>
    </div>

    <!-- Mentoring Modal -->
    <div id="mentoringModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('mentoringModal')">&times;</span>
            <h2>üéØ Mentoring Session</h2>
            <div class="vr-view">
                <h3>Career Guidance with Dr. Smith</h3>
                <div class="vr-environment">
                    <p>üè¢ Private Mentoring Room</p>
                    <p>Interactive whiteboard, document sharing, screen sharing</p>
                </div>
                <div style="text-align: left; margin: 15px 0;">
                    <h4>Session Agenda:</h4>
                    <ul style="margin-left: 20px;">
                        <li>Career path discussion</li>
                        <li>Skills assessment</li>
                        <li>Industry insights</li>
                        <li>Goal setting</li>
                    </ul>
                </div>
                <button class="btn btn-primary" onclick="joinSession('mentoring')">
                    ü•Ω Join Mentoring Session
                </button>
            </div>
        </div>
    </div>

    <!-- Progress Modal -->
    <div id="progressModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('progressModal')">&times;</span>
            <h2>üìà Orientation Progress</h2>
            <div style="text-align: left;">
                <h3>Welcome Tasks Checklist</h3>
                <div style="margin: 20px 0;">
                    <div style="display: flex; align-items: center; margin: 10px 0;">
                        <span style="margin-right: 10px;">‚úÖ</span>
                        <span>Complete VR platform tutorial</span>
                    </div>
                    <div style="display: flex; align-items: center; margin: 10px 0;">
                        <span style="margin-right: 10px;">‚úÖ</span>
                        <span>Join first virtual lecture</span>
                    </div>
                    <div style="display: flex; align-items: center; margin: 10px 0;">
                        <span style="margin-right: 10px;">‚úÖ</span>
                        <span>Visit library in campus tour</span>
                    </div>
                    <div style="display: flex; align-items: center; margin: 10px 0;">
                        <span style="margin-right: 10px;">‚úÖ</span>
                        <span>Join social VR space</span>
                    </div>
                    <div style="display: flex; align-items: center; margin: 10px 0;">
                        <span style="margin-right: 10px;">‚úÖ</span>
                        <span>Complete first lab experiment</span>
                    </div>
                    <div style="display: flex; align-items: center; margin: 10px 0;">
                        <span style="margin-right: 10px;">‚úÖ</span>
                        <span>Schedule mentoring session</span>
                    </div>
                    <div style="display: flex; align-items: center; margin: 10px 0;">
                        <span style="margin-right: 10px;">‚úÖ</span>
                        <span>Use interactive whiteboard</span>
                    </div>
                    <div style="display: flex; align-items: center; margin: 10px 0;">
                        <span style="margin-right: 10px;">‚úÖ</span>
                        <span>Connect with study group</span>
                    </div>
                    <div id="progress1" style="display: flex; align-items: center; margin: 10px 0;">
                        <span style="margin-right: 10px;">‚è≥</span>
                        <span><strong>Complete full campus exploration</strong></span>
                    </div>
                    <div style="display: flex; align-items: center; margin: 10px 0;">
                        <span style="margin-right: 10px;">‚èπÔ∏è</span>
                        <span>Attend orientation ceremony</span>
                    </div>
                </div>
                <div style="text-align: center; margin: 20px 0;">
                    <div class="progress-bar">
                        <div id="orientalProgresBar" class="progress-fill" style="width: 80%"></div>
                    </div>
                    <p id="progress2" style="color: #666; margin-top: 10px;">80% Complete - Almost there! üèÜ</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification">
        <span id="notificationText">Successfully joined VR session!</span>
    </div>

    <script>
        // Enhanced Mock data with detailed scenarios
        var mockData = {
            user: {
                name: "Jan Kowalski",
                role: "Computer Science Student ‚Ä¢ Year 2",
                avatar: "JK",
                status: "online",
                loginTime: null,
                attendanceRecord: []
            },
            lectures: [
                {
                    id: "lec_01",
                    name: "Advanced Algorithms",
                    lecturer: "Prof. Johnson",
                    time: "Today 14:00-15:30",
                    status: "live",
                    participants: 26,
                    room: "Virtual Lecture Hall - Room 101",
                    hasWhiteboard: true,
                    supportsVoice: true
                }
            ],
            currentSession: {
                type: null,
                startTime: null,
                attendanceLogged: false,
                interactionEnabled: false
            }
        };

        // Application state
        var appState = {
            currentUser: mockData.user,
            activeSession: null,
            notifications: [],
            isLoggedIn: false,
            currentRating: 0
        };

        // Social VR Space Functions
        var socialData = {
            sessionStarted: false,
            selectedSpace: null,
            currentParticipants: [],
            audioEnabled: true,
            microphoneEnabled: true,
            recentReactions: []
        };

        var socialSpaces = {
            'study-cafe': {
                name: '‚òï Study Caf√©',
                description: 'Quiet study environment with ambient sounds and group study tables',
                participants: ['Maria S.', 'Piotr K.', 'Elena M.', 'Tomasz W.', 'Anna Z.', 'Jakub P.', 'Kasia M.', 'Micha≈Ç T.', 'Ola R.', 'Pawe≈Ç K.', 'Ania L.', 'Marcin S.'],
                activities: ['Study groups', 'Note sharing', 'Quiet discussion', 'Resource library'],
                ambientSound: 'Soft caf√© music'
            },
            'gaming-lounge': {
                name: 'üéÆ Gaming Lounge',
                description: 'Casual gaming space with multiplayer games and entertainment',
                participants: ['Alex G.', 'Sam L.', 'Jordan M.', 'Taylor R.', 'Casey P.'],
                activities: ['Multiplayer games', 'Tournaments', 'Game streaming', 'Social gaming'],
                ambientSound: 'Gaming atmosphere'
            },
            'discussion-forum': {
                name: 'üí¨ Discussion Forum',
                description: 'Academic discussions and group projects in virtual seminar rooms',
                participants: ['Prof. Davis', 'Sarah K.', 'David L.', 'Emma W.', 'Ryan B.', 'Lisa C.', 'Mark D.', 'Julia F.'],
                activities: ['Academic debates', 'Project collaboration', 'Presentations', 'Q&A sessions'],
                ambientSound: 'Quiet conference room'
            }
        };

        // Campus Exploration Functions
        var campusData = {
            explorationStarted: false,
            currentLocation: 'entrance',
            visitedLocations: ['library', 'cs-building', 'cafeteria', 'sports', 'admin', 'dormitory'],
            totalLocations: 10,
            avatarPosition: { x: 50, y: 50 }
        };

        var locationDetails = {
            'library': {
                name: 'üìö Main Library',
                description: 'Three-floor library with study rooms, computer labs, and extensive digital resources.',
                hotspots: ['Study rooms', 'Computer terminals', 'Archive section', 'Group study areas']
            },
            'cs-building': {
                name: 'üíª Computer Science Building',
                description: 'Modern facility with programming labs, server rooms, and lecture halls.',
                hotspots: ['Programming labs', 'Server room', 'Lecture halls', 'Student workspace']
            },
            'cafeteria': {
                name: 'üçΩÔ∏è Student Cafeteria',
                description: 'Central dining facility with multiple food courts and seating areas.',
                hotspots: ['Food courts', 'Seating areas', 'Vending machines', 'Outdoor terrace']
            },
            'sports': {
                name: 'üèÉ Sports Complex',
                description: 'Complete sports facility with gym, swimming pool, and outdoor courts.',
                hotspots: ['Fitness center', 'Swimming pool', 'Basketball courts', 'Locker rooms']
            },
            'admin': {
                name: 'üè¢ Administration Office',
                description: 'Main administrative building with student services and faculty offices.',
                hotspots: ['Student services', 'Registrar office', 'Financial aid', 'Faculty offices']
            },
            'dormitory': {
                name: 'üè† Dormitory',
                description: 'Student housing with common areas, study rooms, and recreational facilities.',
                hotspots: ['Common rooms', 'Study areas', 'Laundry room', 'Recreation center']
            },
            'engineering': {
                name: '‚öôÔ∏è Engineering Labs',
                description: 'Advanced engineering facilities with specialized equipment and workshops.',
                hotspots: ['Mechanical workshop', 'Electronics lab', 'CAD stations', 'Testing equipment']
            },
            'art': {
                name: 'üé® Art Gallery',
                description: 'Creative space showcasing student artwork and hosting cultural events.',
                hotspots: ['Exhibition halls', 'Student studios', 'Sculpture garden', 'Performance space']
            },
            'medical': {
                name: 'üè• Medical Center',
                description: 'Campus health services with medical staff and emergency facilities.',
                hotspots: ['Consultation rooms', 'Pharmacy', 'Emergency services', 'Health education']
            },
            'union': {
                name: 'üë• Student Union',
                description: 'Hub of student life with clubs, events, and social spaces.',
                hotspots: ['Club offices', 'Event halls', 'Game room', 'Student services']
            }
        };

        // Lab Experiment Functions
        var currentLabStep = 0;
        var selectedEquipment = null;
        var labData = {
            experimentStarted: false,
            currentStep: 0,
            equipmentSelected: [],
            results: {
                initialVolume: 25.0,
                finalVolume: null,
                titrantUsed: null,
                concentration: null
            }
        };

        // Login functionality
        function performLogin() {
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;

            if (!username || !password) {
                alert('Please enter both username and password');
                return;
            }
            if (username !== 'jan.kowalski@student.put.poznan.pl' || password !== 'password123') {
                alert('Invalid username or password');
                return;
            }

            // Simulate login process
            showLoginProgress();

            setTimeout(function () {
                appState.isLoggedIn = true;
                appState.currentUser.loginTime = new Date();

                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';

                showNotification('Successfully logged into Metaverse platform! üéì');
                initializeApp();
            }, 2000);
        }

        function showLoginProgress() {
            const loginBtn = document.querySelector('.login-screen .btn');
            loginBtn.textContent = 'üîÑ Connecting to Metaverse...';
            loginBtn.disabled = true;
        }

        // Enhanced VR Lecture joining
        function joinVRLecture() {
            const steps = [
                { text: 'Loading virtual lecture hall...', delay: 1000 },
                { text: 'Positioning avatar in 3D space...', delay: 1500 },
                { text: 'Recording attendance...', delay: 1000 },
                { text: 'Enabling interactive whiteboard...', delay: 1000 },
                { text: 'Activating voice interaction...', delay: 1000 }
            ];

            let currentStep = 0;
            const statusElement = document.getElementById('environmentStatus');
            const joinBtn = document.getElementById('joinLectureBtn');

            joinBtn.textContent = 'üîÑ Joining Session...';
            joinBtn.disabled = true;

            function executeStep() {
                if (currentStep < steps.length) {
                    statusElement.textContent = steps[currentStep].text;

                    setTimeout(function () {
                        switch (currentStep) {
                            case 2: // Attendance recording
                                document.getElementById('attendanceSection').style.display = 'block';
                                mockData.user.attendanceRecord.push({
                                    lecture: 'Advanced Algorithms',
                                    time: new Date(),
                                    status: 'Present'
                                });
                                break;
                            case 3: // Whiteboard activation
                                document.getElementById('whiteboardSection').style.display = 'block';
                                break;
                            case 4: // Voice interaction
                                document.getElementById('voiceSection').style.display = 'block';
                                break;
                        }

                        currentStep++;
                        if (currentStep < steps.length) {
                            executeStep();
                        } else {
                            completeVRLectureJoin();
                        }
                    }, steps[currentStep].delay);
                }
            }

            executeStep();
        }

        function completeVRLectureJoin() {
            document.getElementById('environmentStatus').textContent = '‚úÖ Successfully joined VR lecture hall!';
            document.getElementById('joinLectureBtn').textContent = 'üìö Lecture in Progress...';

            // Update user status
            const statusElement = document.getElementById('userStatus');
            statusElement.className = 'status in-session';
            statusElement.textContent = 'üîµ In VR Lecture';

            showNotification('Welcome to the virtual lecture hall! üéì');

            // Simulate lecture ending after some time
            setTimeout(function () {
                endLecture();
            }, 8000);
        }

        function endLecture() {
            showNotification('Lecture has ended. Please provide your feedback.');
            document.getElementById('feedbackSection').style.display = 'block';
            document.getElementById('joinLectureBtn').textContent = '‚úÖ Lecture Completed';

            // Update user status back to online
            const statusElement = document.getElementById('userStatus');
            statusElement.className = 'status online';
            statusElement.textContent = 'üü¢ Online';
        }

        // Interactive Whiteboard Functions
        var selectedTool = 'pen';

        function selectTool(tool) {
            selectedTool = tool;
            var buttons = document.querySelectorAll('.tool-btn');
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove('active');
            }

            // Find clicked button and add active class
            var toolButtons = document.querySelectorAll('.tool-btn');
            for (var i = 0; i < toolButtons.length; i++) {
                if (toolButtons[i].textContent.includes(tool)) {
                    toolButtons[i].classList.add('active');
                    break;
                }
            }

            var content = document.getElementById('whiteboardContent');
            switch (tool) {
                case 'pen':
                    content.innerHTML += '<p style="color: blue;">‚úèÔ∏è Drawing with pen tool...</p>';
                    break;
                case 'text':
                    content.innerHTML += '<p style="color: green;">üìù Adding text annotation...</p>';
                    break;
            }
        }

        function toggleMicrophone() {
            var micBtn = document.getElementById('micBtn');
            if (micBtn.textContent.includes('Unmute')) {
                micBtn.textContent = 'üîá Mute Microphone';
                micBtn.style.background = '#f44336';
                showNotification('Microphone activated - you can now speak');
            } else {
                micBtn.textContent = 'üé§ Unmute Microphone';
                micBtn.style.background = '';
                showNotification('Microphone muted');
            }
        }

        // Lab Functions
        function startLabExperiment() {
            var steps = [
                { text: 'Loading virtual laboratory environment...', delay: 1000 },
                { text: 'Initializing safety protocols...', delay: 800 },
                { text: 'Calibrating equipment sensors...', delay: 1000 },
                { text: 'Setting up experiment workspace...', delay: 800 }
            ];

            var currentStep = 0;
            var statusElement = document.getElementById('labEnvironmentStatus');
            var startBtn = document.getElementById('startLabBtn');

            startBtn.textContent = 'üîÑ Initializing Lab...';
            startBtn.disabled = true;

            function executeLabStep() {
                if (currentStep < steps.length) {
                    statusElement.textContent = steps[currentStep].text;

                    setTimeout(function () {
                        currentStep++;
                        if (currentStep < steps.length) {
                            executeLabStep();
                        } else {
                            completeLabSetup();
                        }
                    }, steps[currentStep].delay);
                }
            }

            executeLabStep();
        }

        function completeLabSetup() {
            document.getElementById('labEnvironmentStatus').textContent = '‚úÖ Virtual lab ready for experimentation!';
            document.getElementById('labEquipmentSection').style.display = 'block';
            document.getElementById('labInstructionsSection').style.display = 'block';
            document.getElementById('labActionSection').style.display = 'block';
            document.getElementById('startLabBtn').textContent = 'üß™ Lab Session Active';

            labData.experimentStarted = true;
            showNotification('Virtual laboratory is ready! Select equipment to begin.');

            // Start first step
            startLabStep(1);
        }

        function selectEquipment(equipment) {
            selectedEquipment = equipment;
            var equipmentNames = {
                'burette': 'Burette',
                'pipette': 'Pipette',
                'flask': 'Conical Flask',
                'phmeter': 'pH Meter'
            };

            showNotification('Selected: ' + equipmentNames[equipment]);

            // Add to selected equipment if not already added
            if (labData.equipmentSelected.indexOf(equipment) === -1) {
                labData.equipmentSelected.push(equipment);
            }

            // Update current action based on step and equipment
            updateCurrentAction();
        }

        function startLabStep(stepNumber) {
            currentLabStep = stepNumber;
            labData.currentStep = stepNumber;

            // Update step visual status
            var steps = document.querySelectorAll('.lab-step');
            for (var i = 0; i < steps.length; i++) {
                var step = steps[i];
                var stepNum = parseInt(step.getAttribute('data-step'));

                if (stepNum < stepNumber) {
                    step.classList.add('completed');
                    step.querySelector('.step-status').textContent = '‚úÖ';
                } else if (stepNum === stepNumber) {
                    step.classList.add('current');
                    step.classList.remove('completed');
                    step.querySelector('.step-status').textContent = '‚è≥';
                } else {
                    step.classList.remove('completed', 'current');
                    step.querySelector('.step-status').textContent = '‚èπÔ∏è';
                }
            }

            updateCurrentAction();
        }

        function updateCurrentAction() {
            var actions = {
                1: 'Set up the burette and secure it in the clamp',
                2: 'Fill the burette with standard NaOH solution',
                3: 'Add phenolphthalein indicator to the sample',
                4: 'Begin titration by slowly adding NaOH',
                5: 'Record the final burette reading'
            };

            document.getElementById('currentAction').textContent = actions[currentLabStep] || 'Follow the instructions';

            // Update progress
            var progress = (currentLabStep - 1) * 20;
            document.getElementById('labProgress').style.width = progress + '%';
        }

        function performLabAction() {
            // Validate current action
            var isValid = validateLabAction(currentLabStep, selectedEquipment);

            if (isValid) {
                completeLabStep(currentLabStep);
            } else {
                showNotification('Please select the correct equipment for this step');
            }
        }

        function validateLabAction(step, equipment) {
            var requiredEquipment = {
                1: 'burette',
                2: 'burette',
                3: 'pipette',
                4: 'burette',
                5: 'phmeter'
            };

            return equipment === requiredEquipment[step];
        }

        function completeLabStep(step) {
            showNotification('Step ' + step + ' completed successfully! ‚úÖ');

            // Generate mock results for each step
            switch (step) {
                case 2:
                    showNotification('Standard solution prepared: 0.1 M NaOH');
                    break;
                case 3:
                    showNotification('Indicator added - solution is now pink');
                    break;
                case 4:
                    labData.results.finalVolume = (Math.random() * 5 + 20).toFixed(1);
                    labData.results.titrantUsed = (25.0 - labData.results.finalVolume).toFixed(1);
                    showNotification('Titration complete - endpoint reached');
                    break;
                case 5:
                    // Calculate concentration
                    var molarity = (0.1 * labData.results.titrantUsed / 25.0).toFixed(3);
                    labData.results.concentration = molarity + ' M';
                    showNotification('Results calculated and stored');
                    document.getElementById('labResultsSection').style.display = 'block';
                    updateLabResults();
                    break;
            }

            if (step < 5) {
                setTimeout(function () {
                    startLabStep(step + 1);
                }, 1500);
            } else {
                startLabStep(step + 1);
                showNotification('All steps completed! Review your results.');
                completeExperiment();
            }
        }

        function updateLabResults() {
            document.getElementById('finalVolume').textContent = labData.results.finalVolume + ' mL';
            document.getElementById('titrantUsed').textContent = labData.results.titrantUsed + ' mL';
            document.getElementById('concentration').textContent = labData.results.concentration;

            // Provide feedback
            var concentration = parseFloat(labData.results.concentration);
            var feedback = '';
            var feedbackElement = document.getElementById('labFeedback');

            if (concentration >= 0.095 && concentration <= 0.105) {
                feedback = 'üéâ Excellent! Your results are within acceptable range.';
                feedbackElement.style.color = '#28a745';
            } else {
                feedback = '‚ö†Ô∏è Results may need verification. Check your technique.';
                feedbackElement.style.color = '#ffc107';
            }

            feedbackElement.textContent = feedback;
        }

        function completeExperiment() {
            showNotification('üéâ Lab experiment completed successfully!');
            document.getElementById('labActionBtn').textContent = '‚úÖ Experiment Complete';
            document.getElementById('labActionBtn').disabled = true;
            document.getElementById('currentAction').textContent = 'All steps completed! Review your results.';

            // Update user status
            var statusElement = document.getElementById('userStatus');
            statusElement.className = 'status online';
            statusElement.textContent = 'üü¢ Online';
        }

        // Campus Functions
        function startCampusExploration() {
            var steps = [
                { text: 'Loading virtual campus environment...', delay: 1000 },
                { text: 'Positioning avatar near main entrance...', delay: 800 },
                { text: 'Activating interactive hotspots...', delay: 1000 },
                { text: 'Enabling free navigation mode...', delay: 800 }
            ];

            var currentStep = 0;
            var statusElement = document.getElementById('campusEnvironmentStatus');
            var startBtn = document.getElementById('startCampusBtn');

            startBtn.textContent = 'üîÑ Loading Campus...';
            startBtn.disabled = true;

            function executeCampusStep() {
                if (currentStep < steps.length) {
                    statusElement.textContent = steps[currentStep].text;

                    setTimeout(function () {
                        currentStep++;
                        if (currentStep < steps.length) {
                            executeCampusStep();
                        } else {
                            completeCampusSetup();
                        }
                    }, steps[currentStep].delay);
                }
            }

            executeCampusStep();
        }

        function completeCampusSetup() {
            document.getElementById('campusEnvironmentStatus').textContent = '‚úÖ Campus exploration ready!';
            document.getElementById('campusNavigationSection').style.display = 'block';
            document.getElementById('campusMapSection').style.display = 'block';
            document.getElementById('locationInfoSection').style.display = 'block';
            document.getElementById('campusProgressSection').style.display = 'block';
            document.getElementById('startCampusBtn').textContent = 'üó∫Ô∏è Exploration Active';

            campusData.explorationStarted = true;
            showNotification('Welcome to virtual campus! Click locations on the map to explore.');

            // Update progress display
            updateCampusProgress();

            // Mark visited locations on map
            markVisitedLocations();
        }

        function visitLocation(locationId) {
            if (!campusData.explorationStarted) {
                showNotification('Please start campus exploration first');
                return;
            }

            var location = locationDetails[locationId];
            if (!location) return;

            // Move avatar to location
            moveAvatarToLocation(locationId);

            // Update current location
            campusData.currentLocation = locationId;

            // Show location details
            showLocationInfo(location);

            // Mark as visited if not already
            if (campusData.visitedLocations.indexOf(locationId) === -1) {
                campusData.visitedLocations.push(locationId);
                showNotification('New location discovered: ' + location.name + ' ‚úÖ');
                updateCampusProgress();
                markLocationAsVisited(locationId);
            } else {
                showNotification('Revisiting: ' + location.name);
            }
        }

        function moveAvatarToLocation(locationId) {
            var avatar = document.getElementById('avatarPosition');
            var locationElement = document.querySelector('[data-location="' + locationId + '"]');

            if (locationElement && avatar) {
                var rect = locationElement.getBoundingClientRect();
                var mapRect = document.querySelector('.campus-map').getBoundingClientRect();

                // Calculate relative position
                var x = ((rect.left - mapRect.left + rect.width / 2) / mapRect.width) * 100;
                var y = ((rect.top - mapRect.top + rect.height / 2) / mapRect.height) * 100;

                avatar.style.left = x + '%';
                avatar.style.top = y + '%';

                // Add animation effect
                avatar.style.transition = 'all 1s ease';
                campusData.avatarPosition = { x: x, y: y };
            }
        }

        function showLocationInfo(location) {
            document.getElementById('locationName').textContent = 'üìç ' + location.name;
            document.getElementById('locationDescription').textContent = location.description;

            // Show hotspots
            var hotspotsDiv = document.getElementById('locationHotspots');
            hotspotsDiv.innerHTML = '<h5>üîç Interactive Hotspots:</h5>';
            var hotspotsList = document.createElement('ul');
            hotspotsList.style.marginLeft = '20px';
            hotspotsList.style.color = '#333';

            for (var i = 0; i < location.hotspots.length; i++) {
                var li = document.createElement('li');
                li.textContent = location.hotspots[i];
                li.style.cursor = 'pointer';
                li.style.padding = '2px 0';
                li.onclick = function () {
                    showNotification('Exploring: ' + this.textContent);
                };
                hotspotsList.appendChild(li);
            }

            hotspotsDiv.appendChild(hotspotsList);
            document.getElementById('exploreBtn').style.display = 'block';
        }

        function exploreLocation() {
            var locationName = document.getElementById('locationName').textContent;
            showNotification('Exploring ' + locationName + ' in detail...');

            // Simulate detailed exploration
            setTimeout(function () {
                showNotification('Exploration complete! Information added to your tour log.');
            }, 2000);
        }

        function updateCampusProgress() {
            var visited = campusData.visitedLocations.length;
            var total = campusData.totalLocations;
            var percentage = (visited / total) * 100;

            document.getElementById('campusProgressBar').style.width = percentage + '%';
            document.getElementById('progressText').textContent = visited + '/' + total + ' locations visited';
            document.getElementById('exploreCampusBar').style.width = percentage + '%';
            document.getElementById('exploreCampusProgress').textContent = visited + '/' + total + ' locations visited';

            // Update visited locations list
            var visitedList = document.getElementById('visitedList');
            visitedList.innerHTML = '';

            for (var i = 0; i < campusData.visitedLocations.length; i++) {
                var locationId = campusData.visitedLocations[i];
                var location = locationDetails[locationId];
                if (location) {
                    var li = document.createElement('li');
                    li.textContent = location.name;
                    visitedList.appendChild(li);
                }
            }
            if (visited == 10) {
                document.getElementById('progress1').innerHTML = '<span style="color: green;">‚úÖ</span> <strong>Campus exploration complete! üéâ</strong>';
                document.getElementById('progress2').textContent = '90% Complete - Very close! üèÜ';
                document.getElementById('orientalProgresBar').style.width = '90%';
                document.getElementById('progress3').textContent = '9/10 tasks completed';
                document.getElementById('progress4').style.width = '90%';


            }
        }

        function markVisitedLocations() {
            for (var i = 0; i < campusData.visitedLocations.length; i++) {
                markLocationAsVisited(campusData.visitedLocations[i]);
            }
        }

        function markLocationAsVisited(locationId) {
            var locationElement = document.querySelector('[data-location="' + locationId + '"]');
            if (locationElement) {
                locationElement.classList.add('visited');
            }
        }

        function moveDirection(direction) {
            var directions = {
                'forward': 'Moving forward through campus...',
                'backward': 'Moving backward...',
                'left': 'Turning left...',
                'right': 'Turning right...'
            };

            showNotification(directions[direction]);

            // Simulate movement by slightly adjusting avatar position
            var avatar = document.getElementById('avatarPosition');
            var currentX = parseFloat(avatar.style.left) || 50;
            var currentY = parseFloat(avatar.style.top) || 50;

            switch (direction) {
                case 'forward':
                    currentY = Math.max(5, currentY - 5);
                    break;
                case 'backward':
                    currentY = Math.min(95, currentY + 5);
                    break;
                case 'left':
                    currentX = Math.max(5, currentX - 5);
                    break;
                case 'right':
                    currentX = Math.min(95, currentX + 5);
                    break;
            }

            avatar.style.left = currentX + '%';
            avatar.style.top = currentY + '%';
        }

        // Social Functions
        function startSocialVRSession() {
            var steps = [
                { text: 'Loading social VR environment...', delay: 1000 },
                { text: 'Connecting to social servers...', delay: 800 },
                { text: 'Synchronizing with other participants...', delay: 1000 },
                { text: 'Activating proximity voice chat...', delay: 800 }
            ];

            var currentStep = 0;
            var statusElement = document.getElementById('socialEnvironmentStatus');
            var joinBtn = document.getElementById('joinSocialBtn');

            joinBtn.textContent = 'üîÑ Connecting...';
            joinBtn.disabled = true;

            function executeSocialStep() {
                if (currentStep < steps.length) {
                    statusElement.textContent = steps[currentStep].text;

                    setTimeout(function () {
                        currentStep++;
                        if (currentStep < steps.length) {
                            executeSocialStep();
                        } else {
                            completeSocialSetup();
                        }
                    }, steps[currentStep].delay);
                }
            }

            executeSocialStep();
        }

        function completeSocialSetup() {
            document.getElementById('socialEnvironmentStatus').textContent = '‚úÖ Connected to social VR space!';
            document.getElementById('socialSpaceSelection').style.display = 'block';
            document.getElementById('socialParticipantsSection').style.display = 'block';
            document.getElementById('socialAudioSection').style.display = 'block';
            document.getElementById('socialActivitiesSection').style.display = 'block';
            document.getElementById('socialReactionsSection').style.display = 'block';
            document.getElementById('joinSocialBtn').textContent = 'üåê Social Session Active';

            socialData.sessionStarted = true;
            showNotification('Welcome to Social VR! Select a space to enter.');

            // Simulate real-time participant updates
            startSocialUpdates();
        }

        function selectSocialSpace(spaceId) {
            if (!socialData.sessionStarted) {
                showNotification('Please start social session first');
                return;
            }

            socialData.selectedSpace = spaceId;
            var space = socialSpaces[spaceId];

            // Visual feedback for selection
            var cards = document.querySelectorAll('.social-space-card');
            for (var i = 0; i < cards.length; i++) {
                cards[i].classList.remove('selected');
            }
            document.querySelector('[data-space="' + spaceId + '"]').classList.add('selected');

            // Update environment description
            document.getElementById('socialEnvironmentStatus').textContent =
                'üè† Entering ' + space.name + ' - ' + space.description;

            // Update participants list
            updateParticipantsList(space.participants);

            showNotification('Entering ' + space.name + ' üö™');

            // Position avatar in the space
            setTimeout(function () {
                positionAvatarInSocialSpace(spaceId);
            }, 1000);
        }

        function updateParticipantsList(participants) {
            var participantsList = document.getElementById('socialParticipantsList');
            participantsList.innerHTML = '';

            // Show first 4 participants individually
            for (var i = 0; i < Math.min(4, participants.length); i++) {
                var participantDiv = document.createElement('div');
                participantDiv.className = 'participant';
                participantDiv.innerHTML =
                    '<div class="participant-avatar"></div>' + participants[i];
                participantsList.appendChild(participantDiv);
            }

            // Show remaining count
            if (participants.length > 4) {
                var remainingDiv = document.createElement('div');
                remainingDiv.className = 'participant';
                remainingDiv.innerHTML =
                    '<div class="participant-avatar"></div>+' + (participants.length - 4) + ' others';
                participantsList.appendChild(remainingDiv);
            }

            socialData.currentParticipants = participants;
        }

        function positionAvatarInSocialSpace(spaceId) {
            showNotification('Avatar positioned in ' + socialSpaces[spaceId].name + ' ‚úÖ');
            showNotification('Proximity voice chat activated - move close to others to hear them');

            // Update user status
            var statusElement = document.getElementById('userStatus');
            statusElement.className = 'status in-session';
            statusElement.textContent = 'üîµ In Social VR';
        }

        function toggleSocialMicrophone() {
            socialData.microphoneEnabled = !socialData.microphoneEnabled;
            var btn = document.getElementById('socialMicBtn');

            if (socialData.microphoneEnabled) {
                btn.textContent = 'üé§ Mute Microphone';
                btn.style.background = '';
                showNotification('Microphone enabled - others can hear you');
            } else {
                btn.textContent = 'üîá Microphone Muted';
                btn.style.background = '#f44336';
                showNotification('Microphone muted - others cannot hear you');
            }
        }

        function toggleSocialSpeaker() {
            socialData.audioEnabled = !socialData.audioEnabled;
            var btn = document.getElementById('socialSpeakerBtn');

            if (socialData.audioEnabled) {
                btn.textContent = 'üîä Mute Speaker';
                btn.style.background = '';
                showNotification('Audio enabled - you can hear others');
            } else {
                btn.textContent = 'üîá Speaker Muted';
                btn.style.background = '#f44336';
                showNotification('Audio muted - you cannot hear others');
            }
        }

        function startSocialActivity(activityType) {
            var activities = {
                'quiz': 'Starting collaborative quiz game...',
                'game': 'Launching mini games menu...',
                'study-group': 'Creating study group session...',
                'chat': 'Opening group chat interface...'
            };

            showNotification(activities[activityType]);

            // Simulate activity start
            setTimeout(function () {
                switch (activityType) {
                    case 'quiz':
                        showNotification('üìù Quiz started! "What is the time complexity of quicksort?"');
                        break;
                    case 'game':
                        showNotification('üé≤ Game available: Virtual Tic-Tac-Toe');
                        break;
                    case 'study-group':
                        showNotification('üìö Study group created - Topic: "Database Normalization"');
                        break;
                    case 'chat':
                        showNotification('üí¨ Group chat opened - 12 participants online');
                        break;
                }
            }, 1500);
        }

        function sendReaction(emoji) {
            var timestamp = new Date().toLocaleTimeString();
            var reaction = {
                emoji: emoji,
                user: 'Jan K.',
                time: timestamp
            };

            socialData.recentReactions.unshift(reaction);

            // Keep only last 10 reactions
            if (socialData.recentReactions.length > 10) {
                socialData.recentReactions.pop();
            }

            updateReactionFeed();
            showNotification('Reaction sent: ' + emoji);
        }

        function updateReactionFeed() {
            var feedElement = document.getElementById('reactionFeed');
            feedElement.innerHTML = '';

            for (var i = 0; i < socialData.recentReactions.length; i++) {
                var reaction = socialData.recentReactions[i];
                var reactionDiv = document.createElement('div');
                reactionDiv.innerHTML =
                    '<strong>' + reaction.user + '</strong> ' + reaction.emoji + ' <small>(' + reaction.time + ')</small>';
                feedElement.appendChild(reactionDiv);
            }
        }

        function startSocialUpdates() {
            // Simulate real-time participant count changes
            setInterval(function () {
                if (!socialData.sessionStarted) return;

                // Update participant counts randomly
                var cafeUsers = document.getElementById('cafe-users');
                var gamingUsers = document.getElementById('gaming-users');
                var forumUsers = document.getElementById('forum-users');

                if (cafeUsers) {
                    var currentCount = parseInt(cafeUsers.textContent);
                    var newCount = Math.max(1, currentCount + Math.floor(Math.random() * 3) - 1);
                    cafeUsers.textContent = newCount;
                }

                if (gamingUsers) {
                    var currentCount = parseInt(gamingUsers.textContent);
                    var newCount = Math.max(1, currentCount + Math.floor(Math.random() * 3) - 1);
                    gamingUsers.textContent = newCount;
                }

                if (forumUsers) {
                    var currentCount = parseInt(forumUsers.textContent);
                    var newCount = Math.max(1, currentCount + Math.floor(Math.random() * 3) - 1);
                    forumUsers.textContent = newCount;
                }

                // Occasionally add automatic reactions
                if (Math.random() < 0.1 && socialData.selectedSpace) {
                    var randomEmojis = ['üëã', 'üëç', 'üòä', 'ü§î'];
                    var randomUsers = ['Maria S.', 'Piotr K.', 'Elena M.', 'Alex G.'];
                    var randomEmoji = randomEmojis[Math.floor(Math.random() * randomEmojis.length)];
                    var randomUser = randomUsers[Math.floor(Math.random() * randomUsers.length)];

                    var reaction = {
                        emoji: randomEmoji,
                        user: randomUser,
                        time: new Date().toLocaleTimeString()
                    };

                    socialData.recentReactions.unshift(reaction);
                    if (socialData.recentReactions.length > 10) {
                        socialData.recentReactions.pop();
                    }
                    updateReactionFeed();
                }

            }, 15000); // Update every 15 seconds
        }

        // Feedback System
        function setRating(rating) {
            appState.currentRating = rating;
            var stars = document.querySelectorAll('.star');
            for (var i = 0; i < stars.length; i++) {
                if (i < rating) {
                    stars[i].classList.add('active');
                } else {
                    stars[i].classList.remove('active');
                }
            }
        }

        function submitFeedback() {
            if (appState.currentRating === 0) {
                alert('Please select a rating before submitting');
                return;
            }

            showNotification('Thank you for your feedback! üåü');
            document.getElementById('feedbackSection').style.display = 'none';
            closeModal('lecturesModal');
        }

        function joinSession(sessionType) {
            if (sessionType === 'lecture') {
                joinVRLecture();
            } else if (sessionType === 'mentoring') {
                joinVRMentoring();
            } else {
                // Handle other session types
                showNotification('Starting ' + sessionType + ' session...');
                setTimeout(function () {
                    showNotification(sessionType + ' session completed!');
                }, 3000);
            }
        }
        function joinVRMentoring() {
            showNotification('Joining VR Mentoring session...');
            setTimeout(function () {
                showNotification('VR Mentoring session started!');
                closeModal('mentoringModal')
            }, 3000);
            const span = document.getElementById('mentoringSessionLi');
            if (span) {
                span.classList.remove('upcoming');
                span.classList.add('completed');
                span.textContent = 'Completed';
            }
        }

        // Utility functions
        function showNotification(message, type) {
            if (type === undefined) type = 'success';
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');

            notificationText.textContent = message;
            notification.style.display = 'block';
            notification.style.background = type === 'success' ? '#4CAF50' : '#f44336';

            setTimeout(function () {
                notification.style.display = 'none';
            }, 3000);
        }

        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';

            // Reset modal states
            if (modalId === 'lecturesModal') {
                document.getElementById('attendanceSection').style.display = 'none';
                document.getElementById('whiteboardSection').style.display = 'none';
                document.getElementById('voiceSection').style.display = 'none';
                document.getElementById('feedbackSection').style.display = 'none';
                document.getElementById('joinLectureBtn').textContent = 'ü•Ω Enter VR Lecture Hall';
                document.getElementById('joinLectureBtn').disabled = false;
                document.getElementById('environmentStatus').textContent = 'Loading immersive environment...';
            }

            // Reset lab modal states
            if (modalId === 'labsModal') {
                document.getElementById('labEquipmentSection').style.display = 'none';
                document.getElementById('labInstructionsSection').style.display = 'none';
                document.getElementById('labActionSection').style.display = 'none';
                document.getElementById('labResultsSection').style.display = 'none';
                document.getElementById('startLabBtn').textContent = 'ü•Ω Enter Virtual Lab';
                document.getElementById('startLabBtn').disabled = false;
                document.getElementById('labEnvironmentStatus').textContent = 'Loading lab simulation...';

                // Reset lab data
                currentLabStep = 0;
                selectedEquipment = null;
                labData = {
                    experimentStarted: false,
                    currentStep: 0,
                    equipmentSelected: [],
                    results: {
                        initialVolume: 25.0,
                        finalVolume: null,
                        titrantUsed: null,
                        concentration: null
                    }
                };
            }

            // Reset campus modal states
            if (modalId === 'campusModal') {
                document.getElementById('campusNavigationSection').style.display = 'none';
                document.getElementById('campusMapSection').style.display = 'none';
                document.getElementById('locationInfoSection').style.display = 'none';
                document.getElementById('campusProgressSection').style.display = 'none';
                document.getElementById('startCampusBtn').textContent = 'ü•Ω Start Campus Tour';
                document.getElementById('startCampusBtn').disabled = false;
                document.getElementById('campusEnvironmentStatus').textContent = 'Loading campus environment...';

                // Reset campus data
                campusData = {
                    explorationStarted: false,
                    currentLocation: 'entrance',
                    visitedLocations: ['library', 'cs-building', 'cafeteria', 'sports', 'admin', 'dormitory'],
                    totalLocations: 10,
                    avatarPosition: { x: 50, y: 50 }
                };

                // Reset avatar position
                var avatar = document.getElementById('avatarPosition');
                if (avatar) {
                    avatar.style.left = '50%';
                    avatar.style.top = '50%';
                }
            }

            // Reset social modal states
            if (modalId === 'socialModal') {
                document.getElementById('socialSpaceSelection').style.display = 'none';
                document.getElementById('socialParticipantsSection').style.display = 'none';
                document.getElementById('socialAudioSection').style.display = 'none';
                document.getElementById('socialActivitiesSection').style.display = 'none';
                document.getElementById('socialReactionsSection').style.display = 'none';
                document.getElementById('joinSocialBtn').textContent = 'ü•Ω Join Social VR Space';
                document.getElementById('joinSocialBtn').disabled = false;
                document.getElementById('socialEnvironmentStatus').textContent = 'Loading social space...';

                // Reset social data
                socialData = {
                    sessionStarted: false,
                    selectedSpace: null,
                    currentParticipants: [],
                    audioEnabled: true,
                    microphoneEnabled: true,
                    recentReactions: []
                };

                // Remove selection from space cards
                var cards = document.querySelectorAll('.social-space-card');
                for (var i = 0; i < cards.length; i++) {
                    cards[i].classList.remove('selected');
                }
            }
        }

        // Initialize the application
        function initializeApp() {
            // Set user information
            document.getElementById('userName').textContent = appState.currentUser.name;
            document.getElementById('userRole').textContent = appState.currentUser.role;
            document.getElementById('userAvatar').textContent = appState.currentUser.avatar;

            // Debug: Check if functions exist
            console.log('Functions check:', {
                startCampusExploration: typeof startCampusExploration,
                joinVRLecture: typeof joinVRLecture,
                startLabExperiment: typeof startLabExperiment,
                startSocialVRSession: typeof startSocialVRSession
            });
        }

        // Close modals when clicking outside
        window.onclick = function (event) {
            var modals = document.querySelectorAll('.modal');
            for (var i = 0; i < modals.length; i++) {
                if (event.target === modals[i]) {
                    modals[i].style.display = 'none';
                }
            }
        };

        // Keyboard shortcuts
        document.addEventListener('keydown', function (event) {
            if (event.key === 'Escape') {
                var modals = document.querySelectorAll('.modal');
                for (var i = 0; i < modals.length; i++) {
                    modals[i].style.display = 'none';
                }
            }
        });

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', function () {
            // Start with login screen
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('mainApp').style.display = 'none';
        });
    </script>
</body>

</html>